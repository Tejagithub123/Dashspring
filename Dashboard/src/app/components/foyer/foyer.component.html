<div><br/></div>
<div><br/></div>
<div><br/></div>
<div><br/></div>
<div class="card">
  <div class="card-header">Foyer Management</div>
  <div class="card-body">
    <!-- Add Foyer Form -->
    <form (ngSubmit)="addFoyer()" class="mb-3">
      <div class="form-group">
        <input
          type="text"
          class="form-control"
          placeholder="Foyer Name"
          [(ngModel)]="newFoyer.nom"
          name="nom"
          required
        />
      </div>
      <div class="form-group">
        <input
          type="number"
          class="form-control"
          placeholder="Latitude"
          [(ngModel)]="newFoyer.latitude"
          name="latitude"
          required
        />
      </div>
      <div class="form-group">
        <input
          type="number"
          class="form-control"
          placeholder="Longitude"
          [(ngModel)]="newFoyer.longitude"
          name="longitude"
          required
        />
      </div>
      <button type="submit" class="btn btn-success">Add Foyer</button>
    </form>

    <!-- Search Foyer Form -->
    <form>
      <div class="mb-3 row">
        <label for="table-filtering-search" class="col-xs-3 col-sm-auto col-form-label">Search:</label>
        <div class="col-xs-3 col-sm-auto">
          <input
            type="text"
            class="form-control"
            id="table-filtering-search"
            placeholder="Search by Foyer Name"
            [(ngModel)]="searchQuery"
            name="searchQuery"
            (ngModelChange)="filterFoyers()"
          />
        </div>
      </div>
    </form>

    <!-- Foyer Table -->
    <table class="table table-striped">
      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Personnel Assigned</th>
          <th>Latitude</th>
          <th>Longitude</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let foyer of filteredFoyers; let i = index">
          <td>{{ i + 1 }}</td>
          <td>{{ foyer.nom }}</td>
          <td>{{ foyer.personnel?.name || 'No personnel' }}</td>
          <td>{{ foyer.latitude }}</td>
          <td>{{ foyer.longitude }}</td>
          <td>
            <!-- Update Button -->
            <button class="btn btn-warning btn-sm" (click)="editFoyer(foyer)">
              Update
            </button>
            <!-- Delete Button -->
            <button class="btn btn-danger btn-sm" [disabled]="!foyer?.id" (click)="deleteFoyer(foyer?.id)">
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
